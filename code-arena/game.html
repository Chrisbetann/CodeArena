<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Game | Code Arena</title>
  <link rel="stylesheet" href="styles.css">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel&display=swap" rel="stylesheet">

  <style>
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    .page-transition {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(10, 10, 10, 0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      display: none;
    }

    .page-transition img {
      width: 100px;
      height: 100px;
      animation: spin 1s linear infinite;
    }
  </style>
</head>
<body>
  
  <div class="container">
    <h1 class="title wave-text shimmer-effect">Welcome to the Arena</h1>
    <p class="subtitle" id="welcomeMsg">Welcome back, warrior!</p>

    <div class="avatar-container">
      <img id="avatarImg" src="warrior.png" alt="Warrior Avatar" class="avatar">
    </div>

    <p class="subtitle" id="playerName"></p>

    <!-- Leaderboard Button (only one) -->
<button class="leaderboard-btn" id="leaderboardBtn">🏛️ View Leaderboard</button>

<!-- Leaderboard Modal -->
<div id="leaderboardModal" class="modal">
  <div class="modal-content roman-theme">
    <span class="close-btn" id="closeLeaderboard">&times;</span>
    <h2>🏆 Arena Rankings</h2>
    <ul class="leaderboard-list">
      <li>🛡️ nadia – 150 pts</li>
      <li>⚔️ chris – 120 pts</li>
      <li>🏹 yaire – 105 pts</li>
      <li>🔥 alex – 90 pts</li>
      <li>🪓 jack – 80 pts</li>
    </ul>
  </div>
</div>


    <!-- ⚠️ Removed Difficulty Selection Buttons since they are now on difficulty.html -->

    <div class="question-banner">
      ⚔️ <strong>Your Challenge Awaits!</strong><br>
      🧠 Solve this to prove your might.
    </div>

    <!-- Question Display -->
    <h2 id="question">Loading question...</h2>

    <!-- Quiz/Code Editor Section -->
    <div class="quiz-section">
      <div class="language-selection">
        <div class="banner-text">Choose Your Language</div>
        <div class="language-options">
          <button class="lang-btn" data-id="71">Python</button>
          <button class="lang-btn" data-id="54">C++</button>
          <button class="lang-btn" data-id="62">Java</button>
        </div>
      </div>
    </div>
    
    <div class="banner-text">Write Your Code</div>

    <!-- Clean Transparent Code Box -->
    <div class="transparent-codebox">
      <textarea id="codeInput" class="clean-editor" placeholder="// Type your code here..."></textarea>
    </div>

    <button class="execute-button" onclick="executeCode()">Run Code</button>
    <button class="execute-button" onclick="nextQuestion()">Next Question</button>

    <h3>Output:</h3>
    <pre id="output">Your output will appear here.</pre>

    <button class="logout-button" onclick="logout()">Logout</button>
  </div>

  <script src="script.js"></script>

  <script>
    // ✅ Avatar changes based on selected difficulty from difficulty.html
    const difficulty = localStorage.getItem('difficulty');
    const avatarImg = document.getElementById('avatarImg');
    if (difficulty && ['easy', 'medium', 'hard'].includes(difficulty)) {
      avatarImg.src = `avatar_${difficulty}.png`; // uses avatar_easy.jpg, etc.
    } else {
      avatarImg.src = 'warrior.png'; // fallback default avatar
    }
  </script>

  <script>
    // Optional shield shimmer effect (not used currently but kept)
    const textarea = document.querySelector('.shield-editor');
    const shield = document.querySelector('.shield-wrapper');
    if (textarea && shield) {
      textarea.addEventListener('input', () => {
        shield.style.animation = 'shimmer 1s ease';
        setTimeout(() => {
          shield.style.animation = 'none';
        }, 1000);
      });
    }
  </script>

  <script>
    // Wave text animation for title
    const title = document.querySelector('.wave-text');
    const text = title.textContent;
    title.setAttribute("data-text", text);
    title.innerHTML = [...text].map(char =>
      `<span>${char === " " ? "&nbsp;" : char}</span>`).join("");
  </script>

  <script>
    // Page transition effect for logout
    function showTransitionAndNavigate(url) {
      const transition = document.getElementById('pageTransition');
      transition.style.display = 'flex';
      setTimeout(() => {
        window.location.href = url;
      }, 1000);
    }

    function logout() {
      showTransitionAndNavigate('login.html');
    }
  </script>
</body>
</html>
